<%
var tag = viewTag();
var footerShow = !config.footerHidden && !page.hiddenFooter;
var viewClass = '';
if(!footerShow){
	viewClass+='footer-hidden';
}
%>
<div <%-tag%> id="view-content" layout="row" ng-keypress="viewData.keypress && onKeyPress($event)" flex
	layout-align="start stretch">

	<div id="site-menu"
	 class="view-wrapper md-sidenav-left md-whiteframe-z2"
	 ng-class="{unlocked:!menu.isLocked,lock:menuLock(),showing:menu.showing}"
	 md-component-id="menu"
	 layout="column">
		<div ag-menu-side
		 layout="column"
		 flex>
			<%-template('sidebar/toolbar')%>
			<md-progress-linear class="primary loadingBar"
			 md-mode="{{sidebarLoading?'indeterminate':'determinate'}}"></md-progress-linear>
			<md-content flex="100">
				<%
				var templateSidebar = page.templateSource + '.sidebar';
				if (_.isString(page.sidebar)) {
					templateSidebar = page.sidebar;
				}
				if (!has_template(templateSidebar)) {
					templateSidebar = path.join(page.templateSource, 'index.sidebar');
				}
				if (!has_template(templateSidebar)) {
					templateSidebar = 'sidebar';
				}
				%>
				<%-template(templateSidebar)%>
			</md-content>
			<%if(config.language.extra){%>
			<div layout="row">
				<span class="flex"></span>
				<%if(config.languages_sidebar){%>
				<%-template('layout/languages')%>
				<%}%>
			</div>
			<%}%>
		</div>
	</div>

	<md-content id="view-scroller"
	 flex>
		<div class="view-container <%-viewClass%>"
		 layout="column">
			<%-template(page.template || page.templateSource)%>
			<%if(footerShow){%>
			<%-template('layout/footer',null) %>
			<%}%>
		</div>
		<div id="tools"
		 layout="column">
			<%-template('ui/scroll-top')%>
			<%-template('ui/contact')%>
		</div>
	</md-content>

</div>

<%-template('layout/templates')%>